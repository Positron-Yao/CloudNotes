## pdb

Python 的 `pdb` 是内置的调试工具，通过命令行交互式调试代码。以下是快速上手的使用方法和常用命令总结：

---

### **1. 启动 pdb 的两种方式**
#### **方式一：命令行启动**

```bash
python -m pdb your_script.py
```
直接运行脚本并进入调试模式，会在脚本第一行前暂停。

#### **方式二：代码中插入断点**
在需要调试的位置插入以下代码：
```python
import pdb; pdb.set_trace()
```
运行脚本时，执行到此处会暂停并进入调试模式。

---

### **2. 常用命令速查表**
| 命令       | 简写  | 作用                                   |
| ---------- | ----- | -------------------------------------- |
| `help`     | `h`   | 查看所有命令或某个命令的帮助           |
| `next`     | `n`   | 执行当前行，**不进入函数内部**         |
| `step`     | `s`   | 执行当前行，**进入函数内部**           |
| `continue` | `c`   | 继续执行，直到下一个断点或程序结束     |
| `list`     | `l`   | 显示当前代码片段（默认11行）           |
| `print`    | `p`   | 打印变量值（如 `p variable`）          |
| `break`    | `b`   | 设置断点（如 `b 10` 在第10行设置断点） |
| `where`    | `w`   | 显示当前调用堆栈                       |
| `return`   | `r`   | 执行到当前函数返回                     |
| `quit`     | `q`   | 强制退出调试器                         |
| `args`     | `a`   | 显示当前函数的参数值                   |
| `restart`  | `run` | 重新启动调试程序                       |

---

### **3. 调试示例**
假设有以下有问题的代码 `demo.py`：
```python
def add(a, b):
    result = a + b
    return result

x = 5
y = "3"  # 错误：字符串无法直接参与加法
import pdb; pdb.set_trace()  # 插入断点
total = add(x, y)
print(total)
```

#### **调试流程**
1. **运行代码**：执行 `python demo.py`，会在 `pdb.set_trace()` 处暂停。
2. **查看上下文**：
   ```python
   (Pdb) l  # 显示当前代码
   ```
3. **检查变量**：
   ```python
   (Pdb) p x  # 输出 5
   (Pdb) p y  # 输出 '3'
   ```
4. **单步执行**：
   ```python
   (Pdb) s  # 进入 add 函数内部
   ```
5. **发现错误**：执行到 `result = a + b` 时，因类型错误报错。

---

### **4. 关键技巧**
1. **快速区分 `n` 和 `s`**：
   - `n`：逐行执行，**跳过函数调用**。
   - `s`：逐行执行，**进入函数调用内部**。
2. **断点管理**：
   - `b filename:lineno`：在指定文件的某行设置断点。
   - `b function_name`：在函数入口设置断点。
3. **交互式操作**：
   - 在调试器中可以直接修改变量（如 `y = 3`）或执行任意 Python 代码。
4. **退出调试**：
   - `q` 强制退出，`c` 继续执行到程序结束。

---

### **5. 快速熟悉建议**
1. **实战练习**：在代码中故意制造错误（如类型错误、逻辑错误），用 `pdb` 逐步跟踪。
2. **常用命令优先级**：先掌握 `n`, `s`, `l`, `p`, `c`, `b`, `q`。
3. **善用 `help`**：在 `(Pdb)` 提示符下输入 `h` 查看所有命令，或 `h command` 查看具体帮助。

通过 10-15 分钟的针对性练习，即可熟悉核心调试流程！